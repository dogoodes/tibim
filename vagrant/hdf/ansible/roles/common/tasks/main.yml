---
#
- name: set authorized key for user root copying it from current user
  remote_user: root
  authorized_key:
    user: root
    state: present
    manage_dir: yes
    key: "{{ lookup('file', lookup('env','HOME') + '/.ssh/id_rsa.pub') }}"

# sudo apt-get update
- name: update apt packages
  apt:
    update_cache: yes

# sudo apt-get install ntp
- name: install ntp
  apt:
    package: ntp
    state: present
    update_cache: yes

# update-rc.d ntp defaults
- name: make sure ntp is started up
  service:
    name: ntp
    state: started
    enabled: yes

# /etc/hosts
- name: set file /etc/hosts
  template:
    src: hosts
    dest: /etc/hosts

# sudo apt-get install firewalld
- name: install firewalld
  apt:
    package: firewalld
    state: present
    update_cache: yes

# stop and disable firewalld
- name: stop and disable firewalld
  service:
    name: firewalld
    state: stopped
    enabled: False

# set ulimit
- name: configure ulimit
  command: ulimit -n 10000

# set ulimit
- name: configure umask to 0022
  command: umask 0022

# set umask 0022 in /etc/profile
- name: configure umask to 0027
  command: echo umask 0022 >> /etc/profile

# nscd